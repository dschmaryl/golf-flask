(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(t,e,a){t.exports=a(59)},32:function(t,e,a){},51:function(t,e,a){},58:function(t,e,a){},59:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(10),o=a.n(s),c=(a(32),a(4)),u=a(5),l=a(8),i=a(6),d=a(9),m=a(2),f=a(7),h=a.n(f),p=a(3);a(51);function v(t){function e(e,a,n){var s="col-xs-1 round-header-stat";return"date"!==e&&"course"!==e||(s="col-xs-3 round-header-".concat(e)),r.a.createElement("div",{className:s,onClick:function(){return t.onClick(a,n)}},e)}return r.a.createElement("div",{className:"row",style:{cursor:"pointer"}},e("date","date",!1),e("course","course",!1),e("score","total_strokes",!0),e("front","front_9_strokes",!0),e("back","back_9_strokes",!0),e("putts","total_putts",!0),e("girs","total_gir",!1),e("hdcp","handicap_index",!0))}var k=a(11),E=a.n(k),y={textAlign:"left"},D={textAlign:"right"},b={textAlign:"Right",maxWidth:"28px"};function g(t){var e=t.roundData;function a(t,a){return Array(9).fill().map(function(n,r){return e.holes[r+t][a]}).reduce(function(t,e){return t+e},0)}function n(t,a){function n(t,a){return Array(9).fill().map(function(n,s){return r.a.createElement("td",{style:b,key:a+"_"+(s+t)},(o=s+t,"gir"===a?e.holes[o].gir?"*":"":e.holes[o][a]));var o})}return r.a.createElement("tr",null,r.a.createElement("td",{style:y},t,":"),n(1,a),r.a.createElement("td",{style:D},e["front_9_"+a]),n(10,a),r.a.createElement("td",{style:D},e["back_9_"+a]),r.a.createElement("td",{style:D},e["total_"+a]))}return e.front_9_par=a(1,"par"),e.back_9_par=a(10,"par"),e.total_par=e.front_9_par+e.back_9_par,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("table",{className:"table",style:{width:"100%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:y},"hole:"),Array(9).fill().map(function(t,e){return r.a.createElement("th",{style:b,key:"hole_"+(e+1)},e+1)}),r.a.createElement("th",{style:D},"front"),Array(9).fill().map(function(t,e){return r.a.createElement("th",{style:b,key:"hole_"+(e+10)},e+10)}),r.a.createElement("th",{style:D},"back"),r.a.createElement("th",{style:D},"total"))),r.a.createElement("tbody",null,n("par","par"),n("score","strokes"),n("putts","putts"),n("gir","gir")))))}function _(){var t=Object(m.a)(["\n  text-align: right;\n"]);return _=function(){return t},t}function S(){var t=Object(m.a)(["\n  background-color: #f1f5f1;\n"]);return S=function(){return t},t}var x=p.a.div(S()),O=p.a.div(_());function j(t){var e=t.roundData,a=["date","course","total_strokes","front_9_strokes","back_9_strokes","total_putts","total_gir","handicap_index"];return r.a.createElement("div",{onClick:t.onClick,style:{cursor:"pointer"}},r.a.createElement("div",{className:"row selected-round-row"},a.map(function(e){return function(e){return"date"===e?r.a.createElement(x,{className:"col-xs-3",key:e},r.a.createElement(E.a,{format:"YYYY-MM-DD"},t.roundData.date)):"course"===e?r.a.createElement(x,{className:"col-xs-3",key:e},t.roundData.course):r.a.createElement(x,{className:"col-xs-1",key:e},r.a.createElement(O,null,t.roundData[e]))}(e)})),r.a.createElement(g,{roundData:e}))}a(58);var C=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(i.a)(e).call(this,t))).state={selectedRound:null,rounds:{}},a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentWillReceiveProps",value:function(t){this.setState({selectedRound:null})}},{key:"onRoundClick",value:function(t){var e=this;-1!==Object.keys(this.state.rounds).indexOf(""+t)?this.setState({roundData:this.state.rounds[t],selectedRound:t}):h.a.get("/api/round/"+t).then(function(a){var n=e.state.rounds;n[t]=a.data,e.setState({roundData:a.data,rounds:n,selectedRound:t})})}},{key:"clickedSelected",value:function(){this.setState({selectedRound:null})}},{key:"render",value:function(){var t=this;return Object.keys(this.props.roundsData).reverse().map(function(e){var a=t.props.roundsData[e];if(a.id===t.state.selectedRound)return r.a.createElement(j,{round:a,roundData:t.state.roundData,onClick:function(){return t.clickedSelected()},key:e});function n(t,e){return r.a.createElement("div",{className:e},t)}return r.a.createElement("div",{className:"row",onClick:function(){return t.onRoundClick(a.id)},style:{cursor:"pointer"},key:e},n(r.a.createElement(E.a,{format:"YYYY-MM-DD"},a.date),"col-xs-3 round-date"),n(a.course,"col-xs-3 round-course"),n(a.total_strokes,"col-xs-1 round-stat"),n(a.front_9_strokes,"col-xs-1 round-stat"),n(a.back_9_strokes,"col-xs-1 round-stat"),n(a.total_putts,"col-xs-1 round-stat"),n(a.total_gir,"col-xs-1 round-stat"),n(a.handicap_index,"col-xs-1 round-stat"))})}}]),e}(r.a.Component),w=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(i.a)(e).call(this,t))).state={lastSortedBy:"",lastSortReversed:!1},a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;h.a.get("/api/user/"+this.props.userData.id+"/rounds").then(function(e){e.error?t.setState({requestFailed:!0}):t.setState({roundsData:e.data})}).catch(function(){return t.setState({requestFailed:!0})})}},{key:"sortRounds",value:function(t,e){var a=this.state.roundsData,n=this.state.lastSortReversed;function r(t,e){return Object.values(a).sort(function(a,n){return"date"===t?e?new Date(n.date)-new Date(a.date):new Date(a.date)-new Date(n.date):"course"===t?e?n.course<a.course:a.course<n.course:e?n[t]-a[t]:a[t]-n[t]})}t===this.state.lastSortedBy?this.setState({roundsData:r(t,!n)}):(this.setState({roundsData:r(t,e)}),n=!e),this.setState({lastSortedBy:t,lastSortReversed:!n})}},{key:"seasonRoundsData",value:function(){var t=this;if(this.props.selectedSeason&&"2046"!==this.props.selectedSeason){var e={};return Object.keys(this.state.roundsData).forEach(function(a){new Date(t.state.roundsData[a].date).getFullYear().toString()===t.props.selectedSeason&&(e[a]=t.state.roundsData[a])}),e}return this.state.roundsData}},{key:"render",value:function(){var t=this;return this.state.roundsData?r.a.createElement("div",null,r.a.createElement(v,{onClick:function(e,a){return t.sortRounds(e,a)}}),r.a.createElement(C,{roundsData:this.seasonRoundsData()})):this.state.requestFailed?r.a.createElement("p",null,"error getting rounds"):r.a.createElement("p",null,"loading rounds...")}}]),e}(r.a.Component);function N(){var t=Object(m.a)(["\n  cursor: pointer;\n  text-align: right;\n"]);return N=function(){return t},t}var R=p.a.th(N());function F(t){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"season:"),t.seasons.map(function(e){return r.a.createElement(R,{onClick:function(){return t.onClick(e)},key:e},"2046"===e?"overall":e)})))}function q(){var t=Object(m.a)(["\n  cursor: pointer;\n  text-align: right;\n"]);return q=function(){return t},t}var Y=p.a.td(q());function A(t){var e={strokes:"scoring average",putts:"putts per round",gir:"greens per round",handicap:"handicap",par3:"par 3 average",par4:"par 4 average",par5:"par 5 average"};return r.a.createElement("tbody",null,Object.keys(e).map(function(a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e[a],":"),t.seasons.map(function(e){return r.a.createElement(Y,{onClick:function(){return t.onClick(e)},key:e+"-"+a},t.statsData[e][a])}))}))}var M=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(i.a)(e).call(this,t))).state={requestFailed:!1},a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;h.a.get("/api/user/"+this.props.userData.id+"/stats").then(function(e){e.error?t.setState({requestFailed:!0}):t.setState({statsData:e.data})}).catch(function(){return t.setState({requestFailed:!0})})}},{key:"render",value:function(){var t=this;return this.state.statsData?r.a.createElement("table",{style:{width:"100%"}},r.a.createElement(F,{seasons:Object.keys(this.state.statsData).sort().reverse(),onClick:function(e){return t.props.onSeasonClick(e)}}),r.a.createElement(A,{seasons:Object.keys(this.state.statsData).sort().reverse(),statsData:this.state.statsData,onClick:function(e){return t.props.onSeasonClick(e)}})):this.state.requestFailed?r.a.createElement("p",null,"error gettings stats"):r.a.createElement("p",null,"loading stats")}}]),e}(r.a.Component);function B(){var t=Object(m.a)(["\n  text-align: center;\n"]);return B=function(){return t},t}function J(){var t=Object(m.a)(["\n  padding-top: 20px;\n"]);return J=function(){return t},t}function W(){var t=Object(m.a)(["\n  max-width: 720px;\n  min-width: 340px;\n  margin: auto;\n  padding: 0;\n"]);return W=function(){return t},t}var I=p.a.div(W()),L=p.a.div(J()),P=p.a.div(B()),z=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(l.a)(this,Object(i.a)(e).call(this))).state={requestFailed:!1},t}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;h.a.get("/api/my_info").then(function(e){e.data.error?t.setState({requestFailed:!0}):t.setState({userData:e.data})}).catch(function(){return t.setState({requestFailed:!0})})}},{key:"onSeasonClick",value:function(t){this.setState({selectedSeason:t})}},{key:"render",value:function(){var t=this;return this.state.userData?r.a.createElement(I,{className:"container"},r.a.createElement(P,{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("h3",null,"all statistics:"))),r.a.createElement(L,{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement(M,{userData:this.state.userData,onSeasonClick:function(e){return t.onSeasonClick(e)}}))),r.a.createElement(L,{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement(w,{userData:this.state.userData,selectedSeason:this.state.selectedSeason})))):this.state.requestFailed?r.a.createElement("p",null,"Failed to retrieve user data"):r.a.createElement("p",null,"Loading user data...")}}]),e}(r.a.Component);o.a.render(r.a.createElement(z,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.3dbc58e1.chunk.js.map