(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){e.exports=n(71)},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),c=n.n(o),u=n(6),s=n(32),l=n(23),i=n(34),d=n.n(i),f=n(4),m=n(35),p=n(10),E=n(3),v=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!1,authenticationFailed:!1,statusText:"Please log in"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return{isAuthenticated:!0,authenticationFailed:!1,statusText:"You are logged in"};case"LOGIN_FAILURE":return{isAuthenticated:!1,authenticationFailed:!0,statusText:"Error logging in: ".concat(t.error)};case"LOGOUT":return{isAuthenticated:!1,authenticationFailed:!1,statusText:"Please log in"};default:return e}},rounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roundsLoaded:!1,sortKey:"date",reverseSort:!0,selectedRoundIndex:null,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ROUNDS":return Object(E.a)({},e,{roundsLoaded:!0,data:Object(E.a)({},t.data)});case"ADD_ROUND_DATA":return Object(E.a)({},e,{data:Object(E.a)({},e.data,Object(p.a)({},t.roundIndex,Object(E.a)({},e.data[t.roundIndex],{roundData:Object(E.a)({},t.roundData)})))});case"SELECT_ROUND":return t.data?Object(E.a)({},e,{selectedRoundIndex:t.roundIndex,data:Object(E.a)({},e.data,Object(p.a)({},t.roundIndex,Object(E.a)({},e.data[t.roundIndex],{roundData:Object(E.a)({},t.data)})))}):Object(E.a)({},e,{selectedRoundIndex:t.roundIndex});case"SET_SORT_KEY":return t.sortKey===e.sortKey?Object(E.a)({},e,{reverseSort:!e.reverseSort}):"date"===t.sortKey||"total_gir"===t.sortKey?Object(E.a)({},e,{reverseSort:!0,sortKey:t.sortKey}):Object(E.a)({},e,{reverseSort:!1,sortKey:t.sortKey});case"TOGGLE_SORT_ORDER":return Object(E.a)({},e,{reverseSort:!e.reverseSort});default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{statsLoaded:!1,selectedSeason:2046,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STATS":return Object(E.a)({},e,{statsLoaded:!0,data:Object(E.a)({},t.data)});case"SELECT_SEASON":return Object(E.a)({},e,{selectedSeason:t.season});default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return t.token;case"CLEAR_TOKEN":return null;default:return e}}}),h=Object(u.d)(Object(l.a)({key:"golf-stats",storage:d.a,whitelist:["token"]},v),Object(u.a)(s.a)),b=Object(l.b)(h),g=n(17),O=n.n(g),k=function(e,t){return O.a.get(e,function(e){return{headers:{Authorization:e}}}(t))},_=function(){return function(e,t){(function(e){return O.a.post("/api/is_token_valid",{token:e})})(t().token).then(function(e){return e.data}).then(function(t){return t?e({type:"LOGIN_SUCCESS"}):(e({type:"CLEAR_TOKEN"}),e({type:"LOGIN_FAILURE",error:"Invalid token"}))}).catch(function(){return e({type:"LOGIN_FAILURE",error:"Invalid token"})})}},y=function(e,t){return function(n){return function(e,t){return O.a.post("/api/get_token",{username:e,password:t})}(e,t).then(function(e){return e.data}).then(function(e){return n({type:"SET_TOKEN",token:e.token}),n({type:"LOGIN_SUCCESS"})}).catch(function(){n({type:"LOGIN_FAILURE",error:"Invalid username or password"})})}},x=n(12),j=n(15),S=n(13),N=n(16),w=n(1),C=n(2);function T(){var e=Object(w.a)(["\n  margin: 20px 0 20px 0;\n"]);return T=function(){return e},e}function I(){var e=Object(w.a)(["\n  font-size: 3em;\n"]);return I=function(){return e},e}function D(){var e=Object(w.a)(["\n  min-width: 320px;\n  max-width: 420px;\n  padding: 10% 0 0 20%;\n"]);return D=function(){return e},e}var L=C.a.div(D()),R=C.a.div(I()),A=C.a.div(T()),K=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(j.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:""},n.handleKeyPress=function(e){13===e.keyCode&&n.login()},n.login=function(){n.props.login(n.state.username,n.state.password)},n.render=function(){return r.a.createElement(L,{onKeyPress:n.handleKeyPress},r.a.createElement(R,null,r.a.createElement("div",null,"welcome")),r.a.createElement("div",null,r.a.createElement("h5",null,n.props.statusText)),r.a.createElement(A,null,r.a.createElement("input",{name:"username",type:"text",className:"form-control text-input",value:n.state.username,placeholder:"name",onChange:function(e){return n.setState({username:e.target.value})}})),r.a.createElement(A,null,r.a.createElement("input",{name:"password",type:"password",className:"form-control text-input",value:n.state.password,placeholder:"password",onChange:function(e){return n.setState({password:e.target.value})}})),r.a.createElement(A,null,r.a.createElement("input",{type:"submit",value:"login",className:"btn btn-default",onClick:n.login}),r.a.createElement("input",{type:"submit",value:"register",className:"btn btn-default",onClick:function(){}})))},n}return Object(N.a)(t,e),t}(r.a.Component),U=Object(f.b)(function(e){return{statusText:e.auth.statusText}},function(e){return{login:function(t,n){return e(y(t,n))}}})(K);function F(){var e=Object(w.a)(["\n  padding-top: 20px;\n  padding-bottom: 20px;\n"]);return F=function(){return e},e}var G=C.a.div(F());function Y(){var e=Object(w.a)(["\n  font-weight: bold;\n  text-align: right;\n"]);return Y=function(){return e},e}function P(){var e=Object(w.a)(["\n  font-weight: bold;\n"]);return P=function(){return e},e}var M=C.a.div(P()),z=C.a.div(Y()),J=function(e,t,n){return"date"===e||"course"===e?r.a.createElement(M,{className:"col-xs-3",onClick:function(){return n(t)}},e):r.a.createElement(z,{className:"col-xs-1",onClick:function(){return n(t)}},e)},B=function(e){var t=e.onClick;return r.a.createElement("div",{className:"row",style:{cursor:"pointer"}},J("date","date",t),J("course","course",t),J("score","total_strokes",t),J("front","front_9_strokes",t),J("back","back_9_strokes",t),J("putts","total_putts",t),J("girs","total_gir",t),J("hdcp","handicap_index",t))},q=n(14),H=n.n(q),Q=n(38),V=n.n(Q);function W(){var e=Object(w.a)(["\n  text-align: right;\n  max-width: 28px;\n"]);return W=function(){return e},e}function X(){var e=Object(w.a)(["\n  text-align: right;\n"]);return X=function(){return e},e}function Z(){var e=Object(w.a)(["\n  text-align: left;\n"]);return Z=function(){return e},e}function $(){var e=Object(w.a)(["\n  text-align: left;\n"]);return $=function(){return e},e}var ee=C.a.th($()),te=C.a.td(Z()),ne=C.a.th(X()),ae=C.a.td(W()),re=function(e){return Array.from({length:9},function(t,n){return e(t,n)})},oe=function(e){var t=e.roundData,n=function(e,n){return re(function(a,r){return t.holes[r+e][n]}).reduce(function(e,t){return e+t})};t.front_9_par=n(1,"par"),t.back_9_par=n(10,"par"),t.total_par=t.front_9_par+t.back_9_par;var a=function(e,n){return re(function(a,o){return r.a.createElement(ae,{key:n+"_"+(o+e)},function(e,n){return"gir"===n?t.holes[e].gir?"*":"":t.holes[e][n]}(o+e,n))})},o=function(e,n){return r.a.createElement("tr",null,r.a.createElement(te,null,e,":"),a(1,n),r.a.createElement(ae,null,t["front_9_"+n]),a(10,n),r.a.createElement(ae,null,t["back_9_"+n]),r.a.createElement(ae,null,t["total_"+n]))};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("table",{className:"table",style:{width:"100%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement(ee,null,"hole:"),re(function(e,t){return r.a.createElement(ne,{key:"hole_"+(t+1)},t+1)}),r.a.createElement(ne,null,"front"),re(function(e,t){return r.a.createElement(ne,{key:"hole_"+(t+10)},t+10)}),r.a.createElement(ne,null,"back"),r.a.createElement(ne,null,"total"))),r.a.createElement("tbody",null,o("par","par"),o("score","strokes"),o("putts","putts"),o("gir","gir")))))};function ce(){var e=Object(w.a)(["\n  text-align: right;\n"]);return ce=function(){return e},e}function ue(){var e=Object(w.a)(["\n  background-color: #f1f5f1;\n"]);return ue=function(){return e},e}var se=C.a.div(ue()),le=C.a.div(ce()),ie=["date","course","total_strokes","front_9_strokes","back_9_strokes","total_putts","total_gir","handicap_index"],de=function(e){var t=e.roundData,n=e.onClick;return r.a.createElement("div",{onClick:function(){return n()},style:{cursor:"pointer"}},r.a.createElement("div",{className:"row selected-round-row"},ie.map(function(e){return function(e){return"date"===e?r.a.createElement(se,{className:"col-xs-3",key:e},r.a.createElement(V.a,{format:"YYYY-MM-DD"},t.date)):"course"===e?r.a.createElement(se,{className:"col-xs-3",key:e},t.course):r.a.createElement(se,{className:"col-xs-1",key:e},r.a.createElement(le,null,t[e]))}(e)})),r.a.createElement(oe,{roundData:t}))};function fe(){var e=Object(w.a)(["\n  text-align: right;\n"]);return fe=function(){return e},e}var me=C.a.div(fe()),pe=Object(f.b)(function(e){return{rounds:e.rounds.data,sortKey:e.rounds.sortKey,reverseSort:e.rounds.reverseSort,selectedSeason:e.stats.selectedSeason,selectedRoundIndex:e.rounds.selectedRoundIndex}},function(e){return{selectRound:function(t){return e(function(e){return function(t,n){if(null===e)t({type:"SELECT_ROUND",roundIndex:e});else{var a=n().rounds;a.data[e].roundData?t({type:"SELECT_ROUND",roundIndex:e}):k("/api/round/"+a.data[e].id,n().token).then(function(e){return e.data}).then(function(n){return t({type:"SELECT_ROUND",roundIndex:e,data:n})}).catch(function(){return console.log("failed to get round data")})}}}(t))}}})(function(e){return r.a.createElement("div",null,Object.keys(e.rounds).map(function(e){return parseInt(e)}).filter(function(t){return 2046===e.selectedSeason||e.rounds[t].date.split("-")[0]===""+e.selectedSeason}).sort(function(t,n){return"date"===e.sortKey?H()(e.rounds[e.reverseSort?n:t].date).diff(H()(e.rounds[e.reverseSort?t:n].date)):e.rounds[e.reverseSort?n:t][e.sortKey]>e.rounds[e.reverseSort?t:n][e.sortKey]?1:-1}).map(function(t){var n=e.rounds[t];return t===e.selectedRoundIndex?r.a.createElement(de,{roundData:n.roundData,onClick:function(){return e.selectRound(null)},key:t}):r.a.createElement("div",{className:"row",onClick:function(){return e.selectRound(t)},style:{cursor:"pointer"},key:t},r.a.createElement("div",{className:"col-xs-3"},n.date.split(" ")[0]),r.a.createElement("div",{className:"col-xs-3"},n.course),r.a.createElement(me,{className:"col-xs-1"},n.total_strokes),r.a.createElement(me,{className:"col-xs-1"},n.front_9_strokes),r.a.createElement(me,{className:"col-xs-1"},n.back_9_strokes),r.a.createElement(me,{className:"col-xs-1"},n.total_putts),r.a.createElement(me,{className:"col-xs-1"},n.total_gir),r.a.createElement(me,{className:"col-xs-1"},n.handicap_index))}))}),Ee=Object(f.b)(function(e){return{roundsLoaded:e.rounds.roundsLoaded}},function(e){return{setSortKey:function(t){return e({type:"SET_SORT_KEY",sortKey:t})}}})(function(e){var t=e.roundsLoaded,n=e.setSortKey;return r.a.createElement(G,{className:"row"},t?r.a.createElement("div",{className:"col-xs-12"},r.a.createElement(B,{onClick:n}),r.a.createElement(pe,null)):r.a.createElement("p",null,"loading rounds..."))});function ve(){var e=Object(w.a)(["\n  cursor: pointer;\n  text-align: right;\n"]);return ve=function(){return e},e}var he=C.a.th(ve()),be=function(e){var t=e.seasons,n=e.onClick;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"season:"),t.map(function(e){return r.a.createElement(he,{key:e,onClick:function(){return n(e)}},2046===e?"overall":e)})))};function ge(){var e=Object(w.a)(["\n  cursor: pointer;\n  text-align: right;\n"]);return ge=function(){return e},e}var Oe=C.a.td(ge()),ke={strokes:"scoring average",putts:"putts per round",gir:"greens per round",handicap:"handicap",par3:"par 3 average",par4:"par 4 average",par5:"par 5 average"},_e=function(e){var t=e.seasons,n=e.stats,a=e.onClick;return r.a.createElement("tbody",null,Object.keys(ke).map(function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,ke[e],":"),t.map(function(t){return r.a.createElement(Oe,{onClick:function(){return a(t)},key:t+"-"+e},n[t][e])}))}))},ye=Object(f.b)(function(e){return{statsLoaded:e.stats.statsLoaded,stats:e.stats.data}},function(e){return{selectSeason:function(t){return e(function(e){return{type:"SELECT_SEASON",season:e}}(t))}}})(function(e){var t=e.statsLoaded,n=e.stats,a=e.selectSeason;if(t){var o=Object.keys(n).map(function(e){return parseInt(e)}).sort().reverse();return r.a.createElement(G,{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("table",{style:{width:"100%"}},r.a.createElement(be,{seasons:o,onClick:a}),r.a.createElement(_e,{seasons:o,stats:n,onClick:a}))))}return r.a.createElement("p",null,"loading stats...")});function xe(){var e=Object(w.a)(["\n  text-align: center;\n"]);return xe=function(){return e},e}function je(){var e=Object(w.a)(["\n  max-width: 720px;\n  min-width: 480px;\n  margin: auto;\n"]);return je=function(){return e},e}var Se=C.a.div(je()),Ne=C.a.div(xe()),we=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(j.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.props.stats[2046]||(console.log("getting stats"),n.props.addStats()),n.props.rounds[0]||(console.log("getting rounds"),n.props.addRounds())},n.render=function(){return r.a.createElement(Se,{className:"container"},r.a.createElement(Ne,{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("h3",null,"all statistics"))),r.a.createElement(ye,null),r.a.createElement(Ee,null))},n}return Object(N.a)(t,e),t}(r.a.Component),Ce=Object(f.b)(function(e){return{rounds:e.rounds.data,stats:e.stats.data}},function(e){return{addRounds:function(){return e(function(e,t){k("/api/user/rounds",t().token).then(function(e){return e.data}).then(function(t){return e({type:"ADD_ROUNDS",data:t})}).catch(function(){return console.log("failed to get rounds")})})},addStats:function(){return e(function(e,t){k("/api/user/stats",t().token).then(function(e){return e.data}).then(function(t){return e({type:"ADD_STATS",data:t})}).catch(function(){return console.log("failed to get stats")})})}}})(we),Te=Object(f.b)(function(e){return{token:e.token,isAuthenticated:e.auth.isAuthenticated,authenticationFailed:e.auth.authenticationFailed}},function(e){return{checkToken:function(){return e(_())}}})(function(e){var t=e.token,n=e.isAuthenticated,a=e.authenticationFailed,o=e.checkToken;return t&&n?r.a.createElement(Ce,null):!t||a?r.a.createElement(U,null):(o(),r.a.createElement("div",null,r.a.createElement("p",null,"authenticating...")))});n(70);c.a.render(r.a.createElement(function(e){var t=e.children;return r.a.createElement(f.a,{store:h},r.a.createElement(m.a,{loading:null,persistor:b},t))},null,r.a.createElement(Te,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.78fde747.chunk.js.map